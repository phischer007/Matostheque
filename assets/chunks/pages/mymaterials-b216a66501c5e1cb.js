(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{55011:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mymaterials",function(){return n(72524)}])},72524:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(85893),a=n(67294),s=n(9008),i=n.n(s),o=n(27636),l=n(88005),c=n(98964),d=n(5616),u=n(65582),h=n(51233),f=n(86886),p=n(53219),g=n(15861),x=n(69417);n(34656);var m=n(356),j=n(9487),w=n(35858),Z=n(78462),y=n(23795),_=n(70891),P=n(18987),b=n(69661),C=n(59334),v=n(45697),k=n.n(v),E=n(99565);n(27403);let S=e=>{(0,E.a)().user;let{data:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.ZP,{xs:6,gap:1,container:!0,alignItems:"center",children:(0,r.jsx)(g.Z,{variant:"h6",align:"center",children:"List Of Materials"})}),(0,r.jsx)(Z.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:"16px"},children:t&&t.map((e,n)=>{let a=n<t.length-1,s=JSON.parse(e.images),i=s?"".concat("https://liphy-annuaire.univ-grenoble-alpes.fr/static/","/").concat(s[0]):"";return(0,r.jsx)(y.Z,{underline:"none",color:"inherit",href:"/matostheque/details/material-detail/".concat(e.material_id),style:{display:"contents"},children:(0,r.jsxs)(_.ZP,{divider:a,children:[(0,r.jsx)(P.Z,{children:(0,r.jsx)(b.Z,{src:i,alt:"Material",sx:{height:150,width:200,borderRadius:1}})}),(0,r.jsx)(C.Z,{primary:e.material_title,primaryTypographyProps:{variant:"subtitle1",fontWeight:"bold"},secondary:e.description,secondaryTypographyProps:{variant:"body2"},sx:{ml:2}})]},e.material_id)},e.material_id)})})]})};S.propTypes={count:k().number,items:k().array,onPageChange:k().func,onRowsPerPageChange:k().func,page:k().number,rowsPerPage:k().number};var N=n(93477),T=n(64352),L=n(41664),M=n.n(L);let I=(e,t,n)=>(0,a.useMemo)(()=>(0,N.i)(n,e,t),[e,t,n]),O=(e,t)=>{for(let n in e)if("string"==typeof e[n]&&e[n].toLowerCase().includes(t.toLowerCase())||"object"==typeof e[n]&&O(e[n],t))return!0;return!1},R=()=>{let[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(null),[m,Z]=(0,a.useState)(null),[y,_]=(0,a.useState)(""),[P,b]=(0,a.useState)(0),[C,v]=(0,a.useState)(5),k=(0,E.a)().user,N=k.is_staff?"settings":"/create/create-material";(0,a.useEffect)(()=>{let e="".concat(T.Z.apiUrl,"/loans/details/owner/").concat(k.owner_id,"/"),n="".concat(T.Z.apiUrl,"/materials/owner/").concat(k.owner_id,"/");fetch(e).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{t(e)}).catch(e=>{console.error("Error fetching data:",e)}),fetch(n).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{s(e)}).catch(e=>{console.error("Error fetching data:",e)})},[k.user_id,k.owner_id]),(0,a.useEffect)(()=>{Z(y?e.filter(e=>O(e,y)):e)},[y,e]);let L=I(P,C,m),R=(0,a.useCallback)((e,t)=>{b(t)},[]),z=(0,a.useCallback)(e=>{v(e.target.value)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Personal Materials"})}),(0,r.jsx)(d.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,r.jsx)(u.Z,{maxWidth:"xl",children:(0,r.jsxs)(h.Z,{spacing:3,children:[(0,r.jsxs)(f.ZP,{container:!0,xs:12,justifyContent:"space-between",alignItems:"center",children:[(0,r.jsxs)(f.ZP,{xs:6,gap:1,container:!0,alignItems:"center",children:[(0,r.jsx)(p.Z,{fontSize:"medium",children:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(g.Z,{variant:"h4",align:"center",children:"Personal Materials"})]}),(0,r.jsx)(f.ZP,{xs:6,container:!0,justifyContent:"flex-end",children:(0,r.jsx)(x.Z,{component:M(),href:N,startIcon:(0,r.jsx)(p.Z,{fontSize:"small",children:k.is_staff?(0,r.jsx)(c.Z,{}):(0,r.jsx)(l.Z,{})}),variant:"contained",children:k.is_staff?"Loan Settings":"Add"})})]}),(0,r.jsxs)(h.Z,{direction:"column",justifyContent:"space-between",spacing:4,children:[(0,r.jsx)(w.a,{searchTerm:y,onSearchChange:e=>{_(e.target.value)}}),m&&(0,r.jsx)(j.s,{count:m.length,items:L,onPageChange:R,onRowsPerPageChange:z,page:P,rowsPerPage:C,userRole:k.role,activeTab:"materials"})]}),(0,r.jsx)(h.Z,{direction:"column",justifyContent:"space-between",spacing:4,children:n&&(0,r.jsx)(S,{data:n})})]})})})]})};R.getLayout=e=>(0,r.jsx)(m.A,{children:e});var z=R}},function(e){e.O(0,[839,294,589,740,360,886,375,25,308,356,149,774,888,179],function(){return e(e.s=55011)}),_N_E=e.O()}]);