(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{53184:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(87462),a=n(63366),s=n(67294),o=n(90512),i=n(58510),l=n(44063),c=n(71657),u=n(90948),d=n(1977),f=n(8027);function h(e){return(0,f.ZP)("MuiTableHead",e)}(0,d.Z)("MuiTableHead",["root"]);var x=n(85893);let j=["className","component"],Z=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},h,t)},g=(0,u.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),w={variant:"head"},m="thead";var p=s.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiTableHead"}),{className:s,component:i=m}=n,u=(0,a.Z)(n,j),d=(0,r.Z)({},n,{component:i}),f=Z(d);return(0,x.jsx)(l.Z.Provider,{value:w,children:(0,x.jsx)(g,(0,r.Z)({as:i,className:(0,o.Z)(f.root,s),ref:t,role:i===m?null:"rowgroup",ownerState:d},u))})})},78584:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/loans",function(){return n(99624)}])},99624:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(85893),a=n(67294),s=n(9008),o=n.n(s),i=n(52823);let l=a.forwardRef(function({title:e,titleId:t,...n},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 006 3a9.735 9.735 0 00-3.25.555.75.75 0 00-.5.707v14.25a.75.75 0 001 .707A8.237 8.237 0 016 18.75c1.995 0 3.823.707 5.25 1.886V4.533zM12.75 20.636A8.214 8.214 0 0118 18.75c.966 0 1.89.166 2.75.47a.75.75 0 001-.708V4.262a.75.75 0 00-.5-.707A9.735 9.735 0 0018 3a9.707 9.707 0 00-5.25 1.533v16.103z"}))});var c=n(88005),u=n(98964),d=n(5616),f=n(65582),h=n(51233),x=n(86886),j=n(15861),Z=n(69417),g=n(53219);n(34656);var w=n(356),m=n(9487),p=n(35858),v=n(93477),_=n(64352),b=n(99565),C=n(41664),P=n.n(C);let E=(e,t,n)=>(0,a.useMemo)(()=>(0,v.i)(n,e,t),[e,t,n]),S=(e,t)=>{for(let n in e)if("string"==typeof e[n]&&e[n].toLowerCase().includes(t.toLowerCase())||"object"==typeof e[n]&&S(e[n],t))return!0;return!1},k=()=>{let[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(null),[w,v]=(0,a.useState)(""),[C,k]=(0,a.useState)(0),[y,N]=(0,a.useState)(5),[T,L]=(0,a.useState)("loans"),M=(0,b.a)().user,A=M.is_staff?"All loans":"Your loans",I=M.is_staff?"settings":"/create/create-loan";(0,a.useEffect)(()=>{let e;e=M.is_staff?"".concat(_.Z.apiUrl,"/loans/details/"):"loans"===T?"".concat(_.Z.apiUrl,"/loans/details/user/").concat(M.user_id,"/"):"".concat(_.Z.apiUrl,"/loans/details/owner/").concat(M.owner_id,"/"),fetch(e).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{t(e)}).catch(e=>{console.error("Error fetching data:",e)})},[T,M.user_id,M.owner_id]),(0,a.useEffect)(()=>{s(w?e.filter(e=>S(e,w)):e)},[w,e]);let R=E(C,y,n),z=(0,a.useCallback)((e,t)=>{k(t)},[]),H=(0,a.useCallback)(e=>{N(e.target.value)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Loans"})}),(0,r.jsx)(d.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,r.jsx)(f.Z,{maxWidth:"xl",children:(0,r.jsxs)(h.Z,{spacing:3,children:[(0,r.jsxs)(x.ZP,{container:!0,gap:2,alignItems:"left",children:[(0,r.jsxs)(x.ZP,{item:!0,xs:12,container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(j.Z,{variant:"h4",align:"center",children:"Loans"}),(0,r.jsx)(Z.Z,{component:P(),href:I,startIcon:(0,r.jsx)(g.Z,{fontSize:"small",children:M.is_staff?(0,r.jsx)(u.Z,{}):(0,r.jsx)(c.Z,{})}),variant:"contained",children:M.is_staff?"Loan Settings":"Borrow"})]}),(0,r.jsx)(x.ZP,{item:!0,xs:12,container:!0,alignItems:"left",children:(0,r.jsxs)(h.Z,{direction:"row",spacing:1,justifyContent:"center",children:[(0,r.jsx)(Z.Z,{color:"inherit",startIcon:(0,r.jsx)(g.Z,{fontSize:"small",children:(0,r.jsx)(i.Z,{})}),onClick:()=>L("loans"),variant:"loans"===T?"contained":"text",children:A}),"owner"==M.role&&(0,r.jsx)(Z.Z,{color:"inherit",startIcon:(0,r.jsx)(g.Z,{fontSize:"small",children:(0,r.jsx)(l,{})}),onClick:()=>L("materials"),variant:"materials"===T?"contained":"text",children:"Your materials"})]})})]}),(0,r.jsxs)(h.Z,{direction:"column",justifyContent:"space-between",spacing:4,children:[(0,r.jsx)(p.a,{searchTerm:w,onSearchChange:e=>{v(e.target.value)}}),n?(0,r.jsx)(m.s,{count:n.length,items:R,onPageChange:z,onRowsPerPageChange:H,page:C,rowsPerPage:y,userRole:M.role,activeTab:T}):(0,r.jsx)(j.Z,{variant:"h4",children:"Loading ..."})]})]})})})]})};k.getLayout=e=>(0,r.jsx)(w.A,{children:e});var y=k}},function(e){e.O(0,[839,294,589,740,360,886,375,25,356,149,774,888,179],function(){return e(e.s=78584)}),_N_E=e.O()}]);